<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Laukums</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="css/laukstils.css">
    </head>
    <body>
        <div>
        <label for="lauks">Malas garums:</label>
        <select id="skaitlis" name="lauks">
            <option value="2">2</option>
            <option value="4">4</option>
            <option value="6">6</option>
        </select>
        <button onclick="generators()">Ģenerēt laukumu</button>
        </div>
        <div><h4><i>Mūsdienu režisori un zināmas to filmas</i></h4></div>
        <div id="sak"></div>
        <script>
            var bin=[];
            var dec=[];
            var binh=[];
            var dech=[];
            var saraksts=[];
            var sarakstsh=[];
            var id1;
            var id2;
            var count=0;
            var corr=false;
            var beigt=0;
            var n=0;
            var t=0;
            var atskaite=setInterval(laiks, 1000);;
            var radis;
            //jaukšanas algoritms
            function sajukums(){
                for(let i=0; i<18; i++){
                    binh[i]=i+1;
                    dech[i]=-i-1;
                }
                bin=["Kristofers Nolans", "Stīvens Spīlbergs",
                    "Martins Skorsēze", "Džeimss Kamerons",
                    "Kventins Tarantino", "Brāļi Koeni",
                    "Vudijs Allens", "Pīters Džeksons",
                    "Edgars Raits", "Klints Īstvuds",
                    "Tims Bērtons", "Deivids Finčers",
                    "Roberts Zemeckis", "Vess Andersons",
                    "Bons Čunho", "Bens Afleks",
                    "Alehandro Gonsaless Injaritu", "Giljermo del Toro",];
                dec=["&quotPirmsākums&quot", "&quotŠindlera saraksts&quot", 
                    "&quotVolstrītas vilks&quot", "&quotAvatars&quot", 
                    "&quotBēdīgi slavenie mērgļi&quot", "&quotKur sirmgalvjiem nav vietas&quot",
                    "&quotPusnakts Parīzē&quot", "&quotGredzenu pavēlnieks&quot",
                    "&quotZaļknābis pie stūres&quot", "&quotAmerikāņu snaiperis&quot",
                    "&quotBetmens&quot (1989)", "&quotCīņas klubs&quot",
                    "&quotAtpakaļ nākotnē&quot", "&quotViesnīca &quotDiženā Budapešta&quot&quot",
                    "&quotParazīts&quot", "&quotArgo&quot",
                    "&quotPutncilvēks&quot", "&quotŪdens forma&quot"];
                for(let i=0;i<bin.length;i++){
                    let rand=Math.floor(Math.random()*bin.length);
                    let tmp=bin[rand];
                    bin[rand]=bin[i];
                    bin[i]=tmp;
                    let tmph=binh[rand];
                    binh[rand]=binh[i];
                    binh[i]=tmph;
                    let tmp1=dec[rand];
                    dec[rand]=dec[i];
                    dec[i]=tmp1;
                    let tmp2=dech[rand];
                    dech[rand]=dech[i];
                    dech[i]=tmp2;
                }
                saraksts=[];
                sarakstsh=[];
                for(let i=0;i<n*n/2;i++){
                    saraksts.push(bin[i]);
                    saraksts.push(dec[i]);
                    sarakstsh.push(binh[i]);
                    sarakstsh.push(dech[i]);
                }
                for(let i=0;i<saraksts.length;i++){
                    let rand=Math.floor(Math.random()*saraksts.length);
                    let tmp=saraksts[rand];
                    saraksts[rand]=saraksts[i];
                    saraksts[i]=tmp;
                    let tmph=sarakstsh[rand];
                    sarakstsh[rand]=sarakstsh[i];
                    sarakstsh[i]=tmph;
                }
            }

            function generators(){
               n=document.getElementById("skaitlis").value;
               count=0;
               beigt=0;
               t=0;
               clearInterval(atskaite);
               sajukums();
               let e=document.getElementById("sak");
               document.body.removeChild(e);
               let ldivs=document.createElement("div");
               ldivs.setAttribute("id", "sak");
               for (let i=0; i<n; i++){
                   let mdivs=document.createElement("div");
                   for (let j=0; j<n; j++){
                       let b=document.createElement("button");
                       b.setAttribute("class", "neredz");
                       let a=i*n+j;
                       b.setAttribute("id", a);
                       b.setAttribute("onclick", "maina(this)");
                       b.innerHTML=saraksts[a];
                       mdivs.appendChild(b);
                   }
                   ldivs.appendChild(mdivs);
               }
               radis=document.createElement("p");
               radis.setAttribute("id", "cik");
               radis.innerHTML="Laiks: 0 sek";
               ldivs.appendChild(radis);
               document.body.appendChild(ldivs);
               atskaite=setInterval(laiks, 1000);
               
            }
            
            function maina(poga){
                if (count%2 == 0){
                    if (count > 1&&corr == false){
                        document.getElementById(id1).className="neredz";
                        document.getElementById(id2).className="neredz";
                    }
                    poga.className="redz";
                    id1=poga.id;
                    count++;
                    corr = false;
                }
                else{
                    poga.className="redz";
                    id2=poga.id;
                    count++;
                    if (Math.abs(sarakstsh[id1])==Math.abs(sarakstsh[id2])){
                        corr=true;
                        document.getElementById(id1).className="done";
                        document.getElementById(id2).className="done";
                        beigt=beigt+2;
                        if (beigt == n*n){
                            clearInterval(atskaite);
                            let u=document.getElementById("cik");
                            u.setAttribute("class", "tumss")
                            u.innerHTML="Uzvara! Laiks: "+t+" sek";
                        }
                    }
                }
            }
            function laiks(){
                t++;
                let u=document.getElementById("cik");
                u.innerHTML="Laiks: "+t+" sek";
            }
        </script>
    </body>
</html>
